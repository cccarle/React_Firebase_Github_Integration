(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){e.exports=n(349)},349:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(31),i=n.n(r),c=n(12),s=n(13),l=n(15),u=n(14),h=n(16),p=n(351),d=n(352),f=n(353),m=n(147),g=n.n(m)()(),b=n(20),O=n(32),v=n(149),y=n(24),E={isAuthenticated:!1},w={profileAvatar:"",profileName:"",githubURL:""},j={name:""},k={},I={},N={showNotifications:!1,showRepositories:!0,showOrganization:!1},S=Object(O.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;switch((arguments.length>1?arguments[1]:void 0).type){case"LOGGED_IN_SUCCESS":return Object(y.a)({},e,{isAuthenticated:!0});case"SIGN_OUT":return Object(y.a)({},e,{isAuthenticated:!1});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_PROFILE_DATA":return Object(y.a)({},e,{profileAvatar:t.payload.avatar_url,profileName:t.payload.name,githubURL:t.payload.url});default:return e}},repos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_REPOS_DATA":return t.payload;default:return e}},orgs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ORGS_DATA":case"GET_REPOS_IN_ORGS":return t.payload;default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NOTIFICATIONS":return t.payload;default:return e}},toggel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_NOTIFICATIONS":return Object(y.a)({},e,{showNotifications:t.payload});case"SHOW_REPOSITORIES":return Object(y.a)({},e,{showRepositories:t.payload});case"SHOW_ORGANIZATION":return Object(y.a)({},e,{showOrganization:t.payload});default:return e}}}),A=[v.a],_=Object(O.e)(S,{},Object(O.d)(O.a.apply(void 0,A),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),T=n(69),C=T.initializeApp({apiKey:"AIzaSyBr2zjlkIdRl2TwTN2OOsA85AW8NeHBI2k",authDomain:"guthubdashboard.firebaseapp.com",databaseURL:"https://guthubdashboard.firebaseio.com",projectId:"guthubdashboard",storageBucket:"guthubdashboard.appspot.com",messagingSenderId:"259327836521"}),R=function(){return function(e){var t=[],n=window.localStorage.getItem("token");window.fetch("https://api.github.com/user/orgs",{headers:{Authorization:"token "+n}}).then(function(e){return e.json()}).then(function(n){for(var a=Object.keys(n),o=0;o<a.length;o++){var r=a[o],i=n[r].avatar_url,c=n[r].hooks_url,s=n[r].id,l=n[r].login,u=n[r].url,h=n[r].url,p={avatar_url:"",hooks_url:"",id:"",url:"",name:"",repos_url:""};p.avatar_url=i,p.hooks_url=c,p.id=s,p.name=l,p.url=u,p.repos_url=h,t.push(p)}e({type:"GET_ORGS_DATA",payload:t})})}},D=function(){return function(e){var t=[],n=window.localStorage.getItem("token");window.fetch("https://api.github.com/user/repos",{headers:{Authorization:"token "+n}}).then(function(e){return e.json()}).then(function(n){for(var a=Object.keys(n),o=0;o<a.length;o++){var r=a[o],i=n[r].name,c=n[r].hooks_url,s=n[r].url,l=n[r].owner.login,u=n[r].id,h=n[r].permissions.admin,p={name:"",hooks_url:"",url:"",owner:"",id:"",admin:""};p.name=i,p.hooks_url=c,p.url=s,p.owner=l,p.id=u,p.admin=h,t.push(p)}var d=t.filter(function(e){return!0===e.admin});e({type:"GET_REPOS_DATA",payload:d})})}},G=(C.firestore(),function(e){return function(t){var n=window.localStorage.getItem("token");console.log(e);var a={name:"web",config:{url:"https://us-central1-guthubdashboard.cloudfunctions.net/events",content_type:"json"},scope:["issue"]};window.fetch(e,{method:"POST",body:JSON.stringify(a),headers:{Authorization:"token "+n,"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t({type:"ADD_WEBHOOK",payload:e}),console.log(e)}).catch(function(e){console.log(e)})}}),x=C.firestore(),W=n(25),F=n(17),U=n.n(F),L=n(45),P=n.n(L),z={containerStyle:{marginTop:"20%",textAlign:"center",width:"100%"},root:{width:"100%",maxWidth:500},text:{fontSize:100,color:"black",textAlign:"center"}},H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).signInAttempt=function(){n.props.signInUser()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.containerStyle},o.a.createElement(P.a,{component:"h2",variant:"h2",gutterBottom:!0},"Welcome To Guthub Dashboard"),o.a.createElement("div",null,o.a.createElement(U.a,{onClick:this.signInAttempt,color:"primary",size:"large",variant:"outlined"},"Log in"," ")))}}]),t}(o.a.Component),B=Object(b.b)(null,{signInUser:function(e){return function(e){var t=new T.auth.GithubAuthProvider;t.addScope("user"),t.addScope("repo"),C.auth().signInWithPopup(t).then(function(t){e({type:"LOGGED_IN_SUCCESS",payload:!0});var n=t.credential.accessToken;window.localStorage.setItem("token",n),g.push("/dashboard")}).catch(function(e){var t=e.errorCode,n=e.errorMessage;console.log("Something went wrong please check your credentials or try again. error message : ".concat(n," - ").concat(t))})}}})(Object(W.withStyles)(z)(H)),M=n(157),X=n.n(M),J=n(158),K=n.n(J),V=n(68),Z=n(156),q=n.n(Z),Q=n(71),Y=n.n(Q),$=n(72),ee=n.n($),te=n(153),ne=n.n(te),ae=n(73),oe=n.n(ae),re=n(154),ie=n.n(re),ce=n(155),se=n.n(ce),le=n(151),ue=n.n(le),he=n(152),pe=n.n(he),de=n(150),fe=n.n(de),me=n(70),ge=n.n(me),be=function(e){return{card:{maxWidth:400},media:{height:0,paddingTop:"56.25%"},actions:{display:"flex"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"#6699CC",fontSize:"12"}}},Oe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderImage=function(e,t){if(!(e.length<1))return o.a.createElement(fe.a,{className:t.media,image:e})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserDataFromGithubAPI()}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement(ue.a,{className:e.card},o.a.createElement(pe.a,{avatar:o.a.createElement(ge.a,{"aria-label":"Recipe",className:e.avatar},this.props.profileName.charAt(0)),title:this.props.profileName}),this.renderImage(this.props.profileAvatar,e))}}]),t}(o.a.Component),ve=Object(b.b)(function(e){var t=e.profile;return{profileAvatar:t.profileAvatar,profileName:t.profileName,githubURL:t.githubURL}},{fetchUserDataFromGithubAPI:function(){return function(e){var t=window.localStorage.getItem("token");window.fetch("https://api.github.com/user",{headers:{Authorization:"token "+t}}).then(function(e){return e.json()}).then(function(t){e({type:"GET_USER_PROFILE_DATA",payload:t})})}}})(Object(W.withStyles)(be)(Oe)),ye=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={top:!1,left:!1,bottom:!1,right:!1},n.toggleDrawer=function(e,t){return function(){n.setState(Object(V.a)({},e,t))}},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=o.a.createElement("div",{className:e.list},o.a.createElement(Y.a,null,o.a.createElement(ve,null),["Inbox","Subscription","Notifications","Sign Out"].map(function(e,t){return o.a.createElement(ee.a,{button:!0,key:e},o.a.createElement(ne.a,null,t%2===0?o.a.createElement(ie.a,null):o.a.createElement(se.a,null)),o.a.createElement(oe.a,{primary:e}))})));return o.a.createElement("div",null,o.a.createElement(U.a,{className:e.ButtonColor,onClick:this.toggleDrawer("left",!0)},"profile"),o.a.createElement(q.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},o.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},t)))}}]),t}(o.a.Component),Ee=Object(W.withStyles)({list:{width:250},fullList:{width:"auto"},ButtonColor:{color:"#FFFFFF"}})(ye),we={root:{flexGrow:1},grow:{flexGrow:1,width:450},menuButton:{marginLeft:-12,marginRight:20},ButtonContainer:{textAlign:"right"},navbarColor:{backgroundColor:"#98c1d9"}},je=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).signOutAttempt=function(){n.props.signOutUser()},n.toggelNotification=function(){n.props.showNotification()},n.toggelRepositories=function(){n.props.showRepositories()},n.toggelOrganizations=function(){n.props.showOrganizations()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},o.a.createElement(X.a,{color:"primary",className:e.navbarColor,position:"static"},o.a.createElement(K.a,null,o.a.createElement("div",null,o.a.createElement(P.a,{className:e.grow,variant:"h6",color:"inherit"},"Github Dashboard")),o.a.createElement(Ee,null),o.a.createElement("div",{className:e.ButtonContainer},o.a.createElement(U.a,{onClick:this.toggelOrganizations,color:"inherit"},"Organizations"),o.a.createElement(U.a,{onClick:this.toggelRepositories,color:"inherit"},"Repositories"),o.a.createElement(U.a,{onClick:this.toggelNotification,color:"inherit"},"Notifications"),o.a.createElement(U.a,{onClick:this.signOutAttempt,color:"inherit"},"Sign out")))))}}]),t}(a.Component),ke=Object(b.b)(null,{signOutUser:function(e){return function(e){C.auth().signOut().then(function(){e({type:"SIGN_OUT",payload:!1}),console.log("sign out succesfull"),g.push("/")}).catch(function(e){console.log("error accurred"+e)})}},showRepositories:function(){return function(e){e({type:"SHOW_REPOSITORIES",payload:!0}),e({type:"SHOW_NOTIFICATIONS",payload:!1})}},showNotification:function(){return function(e){e({type:"SHOW_NOTIFICATIONS",payload:!0})}},showOrganizations:function(){return function(e){e({type:"SHOW_REPOSITORIES",payload:!1}),e({type:"SHOW_NOTIFICATIONS",payload:!1}),e({type:"SHOW_ORGANIZATION",payload:!0})}}})(Object(W.withStyles)(we)(je)),Ie=n(46),Ne=n.n(Ie),Se=n(74),Ae=n.n(Se),_e=n(75),Te=n.n(_e),Ce=n(47),Re=n.n(Ce),De=n(77),Ge=n.n(De),xe=n(76),We=n.n(xe),Fe={root:{display:"flex",flexWrap:"wrap",justifyContent:"center",overflow:"hidden"},gridList:{width:800,height:750},button:{backgroundColor:"#FFF",marginRight:20},headerText:{textAlign:"center"}},Ue=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).addWebHooks=function(e){n.props.addWebhook(e)},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchReposDataGithubAPI()}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(Te.a,{cellHeight:180,className:t.gridList},o.a.createElement(Re.a,{key:"header",cols:2,style:{height:"auto"}},o.a.createElement(We.a,{className:t.headerText,component:"div"},"Github Repositories")),this.props.repos.map(function(n){return o.a.createElement(Re.a,{key:n.id},o.a.createElement("img",{src:Ae.a,alt:n.name}),o.a.createElement(Ge.a,{title:n.name,subtitle:o.a.createElement("span",null,"by: ",n.owner),actionIcon:o.a.createElement(U.a,{onClick:function(){return e.addWebHooks(n.hooks_url)},variant:"contained",className:t.button},"Subscribe")}))})))}}]),t}(o.a.Component),Le=Object(b.b)(function(e){return{repos:Ne.a.map(e.repos,function(e){return Object(y.a)({},e)})}},{fetchReposDataGithubAPI:D,addWebhook:G,fetchOrgsDataGithubAPI:R})(Object(W.withStyles)(Fe)(Ue)),Pe={root:{display:"flex",flexWrap:"wrap",justifyContent:"center",overflow:"hidden"},gridList:{width:800,height:750},button:{backgroundColor:"#FFF",marginRight:20},backButton:{backgroundColor:"#6699CC",marginRight:20},headerText:{textAlign:"center"}},ze=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).addWebHooks=function(e){var t=e;n.props.fetchReposInOrg(t)},n.renderOrgs=function(){n.props.fetchOrgsDataGithubAPI()},n.checkIfAdmin=function(e,t){return!0===e.admin||e.repos_url?o.a.createElement(U.a,{onClick:function(){return n.addWebHooks(e.name)},variant:"contained",className:t.button},"View"):o.a.createElement(U.a,{variant:"contained",className:t.button},"Not admin")},n.checkIfAvatar=function(e){return void 0===e?Ae.a:e},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchOrgsDataGithubAPI()}},{key:"render",value:function(){var e=this,t=this.props.classes;return o.a.createElement("div",{className:t.root},o.a.createElement(Te.a,{cellHeight:180,className:t.gridList},o.a.createElement(Re.a,{key:"header",cols:2,style:{height:"auto"}},o.a.createElement(We.a,{className:t.headerText,component:"div"},"Github Organizations")),this.props.orgs.map(function(n){return o.a.createElement(Re.a,{key:n.name},o.a.createElement("img",{src:e.checkIfAvatar(n.avatar_url),alt:"avatar"}),o.a.createElement(Ge.a,{title:n.name,key:n.name,subtitle:o.a.createElement("span",null," ",n.url),actionIcon:e.checkIfAdmin(n,t)}))}),o.a.createElement(U.a,{onClick:function(){return e.renderOrgs()},variant:"contained",className:t.backButton},"Back")))}}]),t}(o.a.Component),He=Object(b.b)(function(e){return{orgs:Ne.a.map(e.orgs,function(e){return Object(y.a)({},e)})}},{fetchReposDataGithubAPI:D,addWebhook:G,fetchOrgsDataGithubAPI:R,fetchReposInOrg:function(e){return function(t){var n=[];window.fetch("https://api.github.com/orgs/".concat(e,"/repos")).then(function(e){return e.json()}).then(function(e){for(var a=Object.keys(e),o=0;o<a.length;o++){var r=a[o],i=e[r].name,c=e[r].hooks_url,s=e[r].url,l=e[r].owner.login,u=e[r].id,h=e[r].permissions.admin,p={name:"",hooks_url:"",url:"",owner:"",id:"",admin:h};p.name=i,p.hooks_url=c,p.url=s,p.owner=l,p.id=u,p.admin=h,n.push(p)}t({type:"GET_REPOS_IN_ORGS",payload:n})})}}})(Object(W.withStyles)(Pe)(ze)),Be=n(159),Me=n.n(Be),Xe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).deleteNotificationsButton=function(){n.props.deleteNotifications()},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchNotifications()}},{key:"render",value:function(){var e=this.props.classes;return o.a.createElement("div",{className:e.root},this.props.notifications.map(function(e){return o.a.createElement(Y.a,{key:e.eventURL},o.a.createElement(ee.a,null,o.a.createElement(ge.a,null,o.a.createElement(Me.a,null)),o.a.createElement(oe.a,{primary:e.title,secondary:e.body})))}),o.a.createElement(U.a,{onClick:this.deleteNotificationsButton,variant:"contained",color:"primary",className:e.Button},"Delete Notifications"))}}]),t}(o.a.Component),Je=Object(b.b)(function(e){return{notifications:Ne.a.map(e.notification,function(e){return Object(y.a)({},e)})}},{deleteNotifications:function(){return function(e){x.collection("notifications").doc("{notification}").delete().then(function(){console.log("Document successfully deleted!"),e({type:"DELETE_NOTIFICATIONS"})}).catch(function(e){console.error("Error removing document: ",e)})}},fetchNotifications:function(){return function(e){var t,n=[],a=[],o=C.auth().currentUser.providerData[0].uid;x.doc("users/".concat(o)).get().then(function(e){e.exists&&(t=e.data().repositoryID)}),x.collection("notifications").get().then(function(o){o.forEach(function(e){n.push(e.data().notification)}),t.forEach(function(e){n.filter(function(t){if(t.repositoryID==e){var n={title:t.title,body:t.body};a.push(n)}})}),e({type:"FETCH_NOTIFICATIONS",payload:a})})}}})(Object(W.withStyles)(function(e){return{root:{maxWidth:360,marginTop:"3%",margin:"auto",width:"50\u2030",textAlign:"center",backgroundColor:e.palette.background.paper},Button:{marginTop:10,marginRight:110}}})(Xe)),Ke=C.firestore(),Ve=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).renderRepoOrNotificatin=function(){return!0===n.props.toggel.showNotifications?o.a.createElement(Je,null):!0===n.props.toggel.showRepositories?o.a.createElement(Le,null):!0===n.props.toggel.showOrganization?o.a.createElement(He,null):void 0},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.checkIfUserIsLoggedIn();var e=C.messaging();e.requestPermission().then(function(){return console.log("have permission"),e.getToken()}).then(function(e){var t=C.auth().currentUser;console.log(t.providerData[0].uid);Ke.collection("users").doc(t.providerData[0].uid).set({msgToken:e},{merge:!0});console.log(e)}).catch(function(e){console.log(e)}),e.onMessage(function(e){console.log("onMesage",e)})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(ke,null),this.renderRepoOrNotificatin())}}]),t}(a.Component),Ze=Object(b.b)(function(e){return e},{checkIfUserIsLoggedIn:function(){return function(e){C.auth().onAuthStateChanged(function(t){t?(t.providerData[0].uid,e({type:"LOGGED_IN_SUCCESS",payload:!0}),g.push("/dashboard")):e({type:"SIGN_OUT",payload:!1})})}}})(Ve),qe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("p",null,"Page Not FOund "))}}]),t}(a.Component),Qe=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(b.a,{store:_},o.a.createElement(p.a,{history:g},o.a.createElement("div",null,o.a.createElement(d.a,null,o.a.createElement(f.a,{exact:!0,path:"/",component:B}),o.a.createElement(f.a,{exact:!0,path:"/dashboard",component:Ze}),o.a.createElement(f.a,{component:qe})))))}}]),t}(a.Component);"serviceWorker"in navigator&&navigator.serviceWorker.register("../firebase-messaging-sw.js").then(function(e){console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),i.a.render(o.a.createElement(Qe,null),document.getElementById("root"))},74:function(e,t,n){e.exports=n.p+"static/media/examplepic.2bf7cacd.jpg"}},[[161,2,1]]]);
//# sourceMappingURL=main.8f991b5a.chunk.js.map